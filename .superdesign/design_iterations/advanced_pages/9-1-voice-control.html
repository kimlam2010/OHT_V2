<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OHT-50 - Voice Control</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../../themes/theme_oht50_unified.css">
    <link rel="stylesheet" href="../../themes/theme_components.css">
    <style>
        .page-container{display:flex;flex-direction:column;min-height:100vh;background:var(--bg-secondary);padding-top:80px}
        .top-navigation{position:fixed;top:0;left:0;right:0;display:flex;align-items:center;justify-content:space-between;padding:var(--space-md) var(--space-lg);background:var(--bg-primary);border-bottom:var(--border-width-1) solid var(--border-color-light);box-shadow:var(--shadow-sm);z-index:var(--z-sticky)}
        .nav-brand{display:flex;align-items:center;gap:var(--space-sm);font-family:var(--font-display);font-size:var(--text-xl);font-weight:var(--font-bold);color:var(--primary-orange)}
        .nav-emergency-controls{display:flex;align-items:center;gap:var(--space-sm);margin-left:var(--space-lg)}
        .btn-emergency-nav{display:flex;align-items:center;gap:var(--space-xs);padding:var(--space-sm) var(--space-md);background:var(--safety-red);color:#fff;border:0;border-radius:var(--radius-md);font-size:var(--text-sm);font-weight:var(--font-bold);cursor:pointer;transition:all var(--transition-fast);box-shadow:var(--shadow-sm)}
        .btn-emergency-nav:hover{background:var(--error-red-dark);transform:translateY(-1px);box-shadow:var(--shadow-md)}
        .btn-nav{display:flex;align-items:center;gap:var(--space-xs);padding:var(--space-sm) var(--space-md);border:var(--border-width-1) solid var(--border-color-light);border-radius:var(--radius-md);font-size:var(--text-sm);font-weight:var(--font-medium);cursor:pointer;transition:all var(--transition-fast)}
        .btn-warning-nav{background:var(--warning-yellow);color:var(--industrial-gray-900);border-color:var(--warning-yellow)}
        .btn-warning-nav:hover{background:var(--warning-yellow-dark);color:#fff}
        .btn-success-nav{background:var(--success-green);color:#fff;border-color:var(--success-green)}
        .btn-success-nav:hover{background:var(--success-green-dark)}
        .nav-menu{display:flex;align-items:center;gap:var(--space-lg)}
        .nav-item{display:flex;align-items:center;gap:var(--space-xs);padding:var(--space-sm) var(--space-md);color:var(--industrial-gray-700);text-decoration:none;border-radius:var(--radius-md);transition:all var(--transition-fast);font-weight:var(--font-medium)}
        .nav-item:hover{background:var(--industrial-gray-100);color:var(--primary-orange)}
        .nav-item.active{background:var(--primary-orange);color:#fff}
        .nav-actions{display:flex;align-items:center;gap:var(--space-sm)}
        .nav-btn{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:var(--bg-secondary);border:var(--border-width-1) solid var(--border-color-light);border-radius:var(--radius-md);color:var(--industrial-gray-600);transition:all var(--transition-fast)}
        .nav-btn:hover{background:var(--primary-orange);color:#fff;border-color:var(--primary-orange)}
        .page-main{flex:1;padding:var(--space-lg)}
        .page-content{max-width:1920px;margin:0 auto}
        .breadcrumb-nav{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm) 0;margin-bottom:var(--space-lg)}
        .breadcrumb-item{color:var(--industrial-gray-600);text-decoration:none;font-size:var(--text-sm)}
        .breadcrumb-item:hover{color:var(--primary-orange)}
        .breadcrumb-item.active{color:var(--industrial-gray-900);font-weight:var(--font-medium)}
        .breadcrumb-separator{color:var(--industrial-gray-400)}
        .content-grid{display:grid;grid-template-columns:repeat(12,1fr);gap:var(--space-lg)}
        .page-header{margin-bottom:var(--space-xl)}
        .page-title{font-size:var(--text-3xl);font-weight:var(--font-bold);color:var(--industrial-gray-900);margin-bottom:var(--space-sm)}
        .page-description{font-size:var(--text-lg);color:var(--industrial-gray-600)}
        
        /* Voice Control Specific Styles */
        .voice-card{background:var(--bg-primary);border:var(--border-width-1) solid var(--border-color-light);border-radius:var(--radius-lg);padding:var(--space-xl);box-shadow:var(--shadow-sm)}
        .voice-card-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--space-lg)}
        .voice-card-title{font-size:var(--text-xl);font-weight:var(--font-semibold);color:var(--industrial-gray-900)}
        .voice-status{padding:var(--space-xs) var(--space-sm);border-radius:var(--radius-full);font-size:var(--text-xs);font-weight:var(--font-bold);text-transform:uppercase}
        .status-listening{background:var(--primary-orange);color:white;animation:pulse 1.5s infinite}
        .status-ready{background:var(--success-green);color:white}
        .status-error{background:var(--error-red);color:white}
        
        /* Voice Interface */
        .voice-interface{text-align:center;padding:var(--space-xl);background:var(--bg-secondary);border-radius:var(--radius-lg);border:var(--border-width-1) solid var(--border-color-light);margin-bottom:var(--space-lg)}
        .voice-button{width:120px;height:120px;border-radius:50%;border:none;background:var(--primary-orange);color:white;font-size:var(--text-2xl);cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;justify-content:center;margin:0 auto var(--space-lg)}
        .voice-button:hover{background:var(--primary-orange-dark);transform:scale(1.05);box-shadow:var(--shadow-lg)}
        .voice-button.listening{background:var(--safety-red);animation:pulse 1s infinite}
        .voice-button:active{transform:scale(0.95)}
        
        .voice-status-display{font-size:var(--text-lg);font-weight:var(--font-medium);color:var(--industrial-gray-700);margin-bottom:var(--space-md)}
        .voice-transcript{background:var(--bg-primary);padding:var(--space-lg);border-radius:var(--radius-lg);border:var(--border-width-1) solid var(--border-color-light);min-height:100px;text-align:left;font-family:var(--font-mono);color:var(--industrial-gray-900)}
        .voice-transcript.empty{color:var(--industrial-gray-500);font-style:italic}
        
        /* Command Examples */
        .command-examples{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:var(--space-lg);margin-bottom:var(--space-lg)}
        .command-category{background:var(--bg-secondary);padding:var(--space-lg);border-radius:var(--radius-lg);border:var(--border-width-1) solid var(--border-color-light)}
        .command-category-header{display:flex;align-items:center;gap:var(--space-md);margin-bottom:var(--space-md)}
        .command-icon{width:40px;height:40px;background:var(--primary-orange);border-radius:var(--radius-lg);display:flex;align-items:center;justify-content:center;color:white}
        .command-title{font-size:var(--text-lg);font-weight:var(--font-semibold);color:var(--industrial-gray-900)}
        .command-list{display:flex;flex-direction:column;gap:var(--space-sm)}
        .command-item{display:flex;align-items:center;justify-content:space-between;padding:var(--space-sm);background:var(--bg-primary);border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-fast)}
        .command-item:hover{background:var(--industrial-gray-100)}
        .command-text{font-weight:var(--font-medium);color:var(--industrial-gray-900)}
        .command-action{font-size:var(--text-sm);color:var(--industrial-gray-600)}
        
        /* Voice Settings */
        .voice-settings{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:var(--space-lg)}
        .setting-group{background:var(--bg-secondary);padding:var(--space-lg);border-radius:var(--radius-lg);border:var(--border-width-1) solid var(--border-color-light)}
        .setting-header{display:flex;align-items:center;gap:var(--space-md);margin-bottom:var(--space-md)}
        .setting-icon{width:40px;height:40px;background:var(--primary-orange);border-radius:var(--radius-lg);display:flex;align-items:center;justify-content:center;color:white}
        .setting-title{font-size:var(--text-lg);font-weight:var(--font-semibold);color:var(--industrial-gray-900)}
        .setting-options{display:flex;flex-direction:column;gap:var(--space-sm)}
        .setting-option{display:flex;align-items:center;justify-content:space-between;padding:var(--space-sm);background:var(--bg-primary);border-radius:var(--radius-md)}
        .setting-label{font-weight:var(--font-medium);color:var(--industrial-gray-900)}
        .setting-toggle{width:40px;height:20px;background:var(--industrial-gray-300);border-radius:var(--radius-full);position:relative;cursor:pointer;transition:all var(--transition-fast)}
        .setting-toggle.active{background:var(--primary-orange)}
        .setting-toggle::after{content:'';position:absolute;top:2px;left:2px;width:16px;height:16px;background:white;border-radius:50%;transition:all var(--transition-fast)}
        .setting-toggle.active::after{transform:translateX(20px)}
        
        /* Button Styles */
        .btn-primary{background:var(--primary-orange);color:white;border:none;padding:var(--space-sm) var(--space-lg);border-radius:var(--radius-md);font-weight:var(--font-medium);cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;gap:var(--space-sm)}
        .btn-primary:hover{background:var(--primary-orange-dark);transform:translateY(-1px);box-shadow:var(--shadow-md)}
        .btn-secondary{background:var(--bg-secondary);color:var(--industrial-gray-700);border:var(--border-width-1) solid var(--border-color-light);padding:var(--space-sm) var(--space-lg);border-radius:var(--radius-md);font-weight:var(--font-medium);cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;gap:var(--space-sm)}
        .btn-secondary:hover{background:var(--industrial-gray-100)}
        .btn-danger{background:var(--error-red);color:white;border:none;padding:var(--space-sm) var(--space-lg);border-radius:var(--radius-md);font-weight:var(--font-medium);cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;gap:var(--space-sm)}
        .btn-danger:hover{background:var(--error-red-dark)}
        
        /* Voice History */
        .voice-history{max-height:300px;overflow-y:auto}
        .history-item{display:flex;align-items:center;justify-content:space-between;padding:var(--space-md);border-bottom:var(--border-width-1) solid var(--border-color-light);transition:all var(--transition-fast)}
        .history-item:hover{background:var(--bg-secondary)}
        .history-info{display:flex;flex-direction:column;gap:var(--space-xs)}
        .history-command{font-weight:var(--font-medium);color:var(--industrial-gray-900)}
        .history-meta{font-size:var(--text-sm);color:var(--industrial-gray-600)}
        .history-status{font-size:var(--text-xs);padding:var(--space-xs) var(--space-sm);border-radius:var(--radius-full)}
        .status-success{background:var(--success-green);color:white}
        .status-error{background:var(--error-red);color:white}
        
        /* Responsive Design */
        @media (max-width:1024px){.nav-menu{gap:var(--space-md)}.nav-item{padding:var(--space-xs) var(--space-sm);font-size:var(--text-sm)}.command-examples{grid-template-columns:1fr}.voice-settings{grid-template-columns:1fr}}
        @media (max-width:768px){.nav-menu{display:none}.nav-emergency-controls{margin-left:var(--space-sm);gap:var(--space-xs)}.btn-emergency-nav,.btn-nav{padding:var(--space-xs) var(--space-sm);font-size:var(--text-xs)}.btn-emergency-nav i,.btn-nav i{width:12px;height:12px}.page-container{padding-top:60px}.content-grid{grid-template-columns:repeat(6,1fr);gap:var(--space-md)}.voice-button{width:100px;height:100px;font-size:var(--text-xl)}}
        @media (max-width:640px){.content-grid{grid-template-columns:repeat(2,1fr);gap:var(--space-sm)}}
        
        .skip-link{position:absolute;top:-40px;left:6px;background:var(--primary-orange);color:#fff;padding:var(--space-sm) var(--space-md);text-decoration:none;border-radius:var(--radius-md);z-index:var(--z-emergency)}
        .skip-link:focus{top:6px}
        .nav-item:focus-visible,.btn:focus-visible,.nav-btn:focus-visible,.voice-button:focus-visible,.command-item:focus-visible,.setting-toggle:focus-visible{outline:var(--border-width-2) solid var(--primary-orange);outline-offset:var(--space-xs)}
        
        @keyframes pulse{0%{opacity:1}50%{opacity:0.7}100%{opacity:1}}
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <div class="page-container">
        <nav class="top-navigation" role="navigation" aria-label="Main navigation">
            <div class="nav-brand">
                <i data-lucide="activity" class="w-6 h-6" aria-hidden="true"></i>
                <span>OHT-50</span>
            </div>
            <div class="nav-emergency-controls">
                <button class="btn-emergency-nav" id="emergency-stop" aria-label="Emergency Stop">
                    <i data-lucide="square" class="w-4 h-4" aria-hidden="true"></i>
                    E-STOP
                </button>
                <button class="btn-nav btn-warning-nav" id="pause-system" aria-label="Pause System">
                    <i data-lucide="pause" class="w-4 h-4" aria-hidden="true"></i>
                    Pause
                </button>
                <button class="btn-nav btn-success-nav" id="reset-system" aria-label="Reset System">
                    <i data-lucide="refresh-cw" class="w-4 h-4" aria-hidden="true"></i>
                    Reset
                </button>
            </div>
            <div class="nav-menu">
                <a href="../core_pages/2-1-dashboard-main.html" class="nav-item" aria-label="Dashboard">
                    <i data-lucide="layout-dashboard" class="w-4 h-4" aria-hidden="true"></i>
                    Dashboard
                </a>
                <a href="../core_pages/3-1-control-panel.html" class="nav-item" aria-label="Control Panel">
                    <i data-lucide="gamepad-2" class="w-4 h-4" aria-hidden="true"></i>
                    Control Panel
                </a>
                <a href="../core_pages/4-1-map-interface.html" class="nav-item" aria-label="Map & Navigation">
                    <i data-lucide="map" class="w-4 h-4" aria-hidden="true"></i>
                    Map & Navigation
                </a>
                <a href="../functional_pages/5-1-monitoring.html" class="nav-item" aria-label="Monitoring">
                    <i data-lucide="monitor" class="w-4 h-4" aria-hidden="true"></i>
                    Monitoring
                </a>
                <a href="../functional_pages/6-1-configuration.html" class="nav-item" aria-label="Configuration">
                    <i data-lucide="settings" class="w-4 h-4" aria-hidden="true"></i>
                    Configuration
                </a>
                <a href="../functional_pages/7-1-reports.html" class="nav-item" aria-label="Reports">
                    <i data-lucide="file-text" class="w-4 h-4" aria-hidden="true"></i>
                    Reports
                </a>
                <a href="8-1-alerts.html" class="nav-item" aria-label="Alerts">
                    <i data-lucide="alert-triangle" class="w-4 h-4" aria-hidden="true"></i>
                    Alerts
                </a>
                <a href="9-1-voice-control.html" class="nav-item active" aria-current="page" aria-label="Voice Control">
                    <i data-lucide="mic" class="w-4 h-4" aria-hidden="true"></i>
                    Voice Control
                </a>
            </div>
            <div class="nav-actions">
                <button class="nav-btn" aria-label="Notifications">
                    <i data-lucide="bell" class="w-5 h-5" aria-hidden="true"></i>
                </button>
                <button class="nav-btn" aria-label="User menu">
                    <i data-lucide="user" class="w-5 h-5" aria-hidden="true"></i>
                </button>
            </div>
        </nav>
        <main id="main-content" class="page-main">
            <div class="page-content">
                <nav class="breadcrumb-nav" aria-label="Breadcrumb">
                    <a href="../core_pages/2-1-dashboard-main.html" class="breadcrumb-item">Dashboard</a>
                    <span class="breadcrumb-separator">/</span>
                    <span class="breadcrumb-item active">Voice Control</span>
                </nav>
                <header class="page-header">
                    <h1 class="page-title">Voice Control</h1>
                    <p class="page-description">Voice command interface and speech recognition for OHT-50</p>
                </header>
                <div class="content-grid">
                    <!-- Voice Interface -->
                    <section class="voice-card" style="grid-column: span 12;">
                        <div class="voice-card-header">
                            <h2 class="voice-card-title">Voice Interface</h2>
                            <span class="voice-status status-ready" id="voice-status">READY</span>
                        </div>
                        <div class="voice-interface">
                            <button class="voice-button" id="voice-button" aria-label="Start voice recognition">
                                <i data-lucide="mic" class="w-12 h-12" aria-hidden="true"></i>
                            </button>
                            <div class="voice-status-display" id="voice-status-display">
                                Click the microphone to start voice recognition
                            </div>
                            <div class="voice-transcript empty" id="voice-transcript">
                                Your voice commands will appear here...
                            </div>
                        </div>
                    </section>

                    <!-- Command Examples -->
                    <section class="voice-card" style="grid-column: span 12;">
                        <div class="voice-card-header">
                            <h2 class="voice-card-title">Voice Commands</h2>
                        </div>
                        <div class="command-examples">
                            <div class="command-category">
                                <div class="command-category-header">
                                    <div class="command-icon">
                                        <i data-lucide="gamepad-2" class="w-5 h-5" aria-hidden="true"></i>
                                    </div>
                                    <div class="command-title">Control Commands</div>
                                </div>
                                <div class="command-list">
                                    <div class="command-item" onclick="speakCommand('Start system')">
                                        <div class="command-text">"Start system"</div>
                                        <div class="command-action">Start OHT-50</div>
                                    </div>
                                    <div class="command-item" onclick="speakCommand('Stop system')">
                                        <div class="command-text">"Stop system"</div>
                                        <div class="command-action">Stop OHT-50</div>
                                    </div>
                                    <div class="command-item" onclick="speakCommand('Emergency stop')">
                                        <div class="command-text">"Emergency stop"</div>
                                        <div class="command-action">Emergency stop</div>
                                    </div>
                                    <div class="command-item" onclick="speakCommand('Go home')">
                                        <div class="command-text">"Go home"</div>
                                        <div class="command-action">Return to home position</div>
                                    </div>
                                    <div class="command-item" onclick="speakCommand('Move forward')">
                                        <div class="command-text">"Move forward"</div>
                                        <div class="command-action">Move robot forward</div>
                                    </div>
                                    <div class="command-item" onclick="speakCommand('Turn left')">
                                        <div class="command-text">"Turn left"</div>
                                        <div class="command-action">Turn robot left</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="command-category">
                                <div class="command-category-header">
                                    <div class="command-icon">
                                        <i data-lucide="settings" class="w-5 h-5" aria-hidden="true"></i>
                                    </div>
                                    <div class="command-title">System Commands</div>
                                </div>
                                <div class="command-list">
                                    <div class="command-item" onclick="speakCommand('System status')">
                                        <div class="command-text">"System status"</div>
                                        <div class="command-action">Check system status</div>
                                    </div>
                                    <div class="command-item" onclick="speakCommand('Battery level')">
                                        <div class="command-text">"Battery level"</div>
                                        <div class="command-action">Check battery status</div>
                                    </div>
                                    <div class="command-item" onclick="speakCommand('Temperature')">
                                        <div class="command-text">"Temperature"</div>
                                        <div class="command-action">Check temperature</div>
                                    </div>
                                    <div class="command-item" onclick="speakCommand('Speed up')">
                                        <div class="command-text">"Speed up"</div>
                                        <div class="command-action">Increase speed</div>
                                    </div>
                                    <div class="command-item" onclick="speakCommand('Slow down')">
                                        <div class="command-text">"Slow down"</div>
                                        <div class="command-action">Decrease speed</div>
                                    </div>
                                    <div class="command-item" onclick="speakCommand('Pause')">
                                        <div class="command-text">"Pause"</div>
                                        <div class="command-action">Pause operation</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="command-category">
                                <div class="command-category-header">
                                    <div class="command-icon">
                                        <i data-lucide="map" class="w-5 h-5" aria-hidden="true"></i>
                                    </div>
                                    <div class="command-title">Navigation Commands</div>
                                </div>
                                <div class="command-list">
                                    <div class="command-item" onclick="speakCommand('Go to position A')">
                                        <div class="command-text">"Go to position A"</div>
                                        <div class="command-action">Navigate to position</div>
                                    </div>
                                    <div class="command-item" onclick="speakCommand('Follow path')">
                                        <div class="command-text">"Follow path"</div>
                                        <div class="command-action">Follow predefined path</div>
                                    </div>
                                    <div class="command-item" onclick="speakCommand('Avoid obstacle')">
                                        <div class="command-text">"Avoid obstacle"</div>
                                        <div class="command-action">Enable obstacle avoidance</div>
                                    </div>
                                    <div class="command-item" onclick="speakCommand('Map view')">
                                        <div class="command-text">"Map view"</div>
                                        <div class="command-action">Show map interface</div>
                                    </div>
                                    <div class="command-item" onclick="speakCommand('Current location')">
                                        <div class="command-text">"Current location"</div>
                                        <div class="command-action">Get current position</div>
                                    </div>
                                    <div class="command-item" onclick="speakCommand('Scan area')">
                                        <div class="command-text">"Scan area"</div>
                                        <div class="command-action">Scan surroundings</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Voice Settings -->
                    <section class="voice-card" style="grid-column: span 8;">
                        <div class="voice-card-header">
                            <h2 class="voice-card-title">Voice Settings</h2>
                        </div>
                        <div class="voice-settings">
                            <div class="setting-group">
                                <div class="setting-header">
                                    <div class="setting-icon">
                                        <i data-lucide="mic" class="w-5 h-5" aria-hidden="true"></i>
                                    </div>
                                    <div class="setting-title">Recognition Settings</div>
                                </div>
                                <div class="setting-options">
                                    <div class="setting-option">
                                        <div class="setting-label">Voice Recognition</div>
                                        <div class="setting-toggle active" data-setting="voice-recognition" onclick="toggleSetting(this)"></div>
                                    </div>
                                    <div class="setting-option">
                                        <div class="setting-label">Continuous Listening</div>
                                        <div class="setting-toggle" data-setting="continuous-listening" onclick="toggleSetting(this)"></div>
                                    </div>
                                    <div class="setting-option">
                                        <div class="setting-label">Noise Cancellation</div>
                                        <div class="setting-toggle active" data-setting="noise-cancellation" onclick="toggleSetting(this)"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="setting-group">
                                <div class="setting-header">
                                    <div class="setting-icon">
                                        <i data-lucide="volume-2" class="w-5 h-5" aria-hidden="true"></i>
                                    </div>
                                    <div class="setting-title">Audio Settings</div>
                                </div>
                                <div class="setting-options">
                                    <div class="setting-option">
                                        <div class="setting-label">Voice Feedback</div>
                                        <div class="setting-toggle active" data-setting="voice-feedback" onclick="toggleSetting(this)"></div>
                                    </div>
                                    <div class="setting-option">
                                        <div class="setting-label">Sound Effects</div>
                                        <div class="setting-toggle active" data-setting="sound-effects" onclick="toggleSetting(this)"></div>
                                    </div>
                                    <div class="setting-option">
                                        <div class="setting-label">Confirmation Beeps</div>
                                        <div class="setting-toggle" data-setting="confirmation-beeps" onclick="toggleSetting(this)"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="setting-group">
                                <div class="setting-header">
                                    <div class="setting-icon">
                                        <i data-lucide="globe" class="w-5 h-5" aria-hidden="true"></i>
                                    </div>
                                    <div class="setting-title">Language Settings</div>
                                </div>
                                <div class="setting-options">
                                    <div class="setting-option">
                                        <div class="setting-label">Vietnamese</div>
                                        <div class="setting-toggle active" data-setting="lang-vi" onclick="toggleSetting(this)"></div>
                                    </div>
                                    <div class="setting-option">
                                        <div class="setting-label">English</div>
                                        <div class="setting-toggle" data-setting="lang-en" onclick="toggleSetting(this)"></div>
                                    </div>
                                    <div class="setting-option">
                                        <div class="setting-label">Japanese</div>
                                        <div class="setting-toggle" data-setting="lang-ja" onclick="toggleSetting(this)"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Voice History -->
                    <section class="voice-card" style="grid-column: span 4;">
                        <div class="voice-card-header">
                            <h2 class="voice-card-title">Recent Commands</h2>
                        </div>
                        <div class="voice-history">
                            <div class="history-item">
                                <div class="history-info">
                                    <div class="history-command">"System status"</div>
                                    <div class="history-meta">2 minutes ago</div>
                                </div>
                                <div class="history-status status-success">Success</div>
                            </div>
                            <div class="history-item">
                                <div class="history-info">
                                    <div class="history-command">"Go home"</div>
                                    <div class="history-meta">5 minutes ago</div>
                                </div>
                                <div class="history-status status-success">Success</div>
                            </div>
                            <div class="history-item">
                                <div class="history-info">
                                    <div class="history-command">"Move forward"</div>
                                    <div class="history-meta">8 minutes ago</div>
                                </div>
                                <div class="history-status status-success">Success</div>
                            </div>
                            <div class="history-item">
                                <div class="history-info">
                                    <div class="history-command">"Unknown command"</div>
                                    <div class="history-meta">12 minutes ago</div>
                                </div>
                                <div class="history-status status-error">Error</div>
                            </div>
                            <div class="history-item">
                                <div class="history-info">
                                    <div class="history-command">"Battery level"</div>
                                    <div class="history-meta">15 minutes ago</div>
                                </div>
                                <div class="history-status status-success">Success</div>
                            </div>
                        </div>
                    </section>

                    <!-- Voice Actions -->
                    <section class="voice-card" style="grid-column: span 12;">
                        <div class="voice-card-header">
                            <h2 class="voice-card-title">Voice Management</h2>
                        </div>
                        <div style="display: flex; gap: var(--space-md); align-items: center; flex-wrap: wrap;">
                            <button class="btn-primary" onclick="testVoice()">
                                <i data-lucide="play" class="w-4 h-4" aria-hidden="true"></i>
                                Test Voice Recognition
                            </button>
                            <button class="btn-secondary" onclick="clearHistory()">
                                <i data-lucide="trash-2" class="w-4 h-4" aria-hidden="true"></i>
                                Clear History
                            </button>
                            <button class="btn-secondary" onclick="exportCommands()">
                                <i data-lucide="download" class="w-4 h-4" aria-hidden="true"></i>
                                Export Commands
                            </button>
                            <button class="btn-secondary" onclick="trainVoice()">
                                <i data-lucide="brain" class="w-4 h-4" aria-hidden="true"></i>
                                Train Voice Model
                            </button>
                            <button class="btn-danger" onclick="resetVoice()">
                                <i data-lucide="refresh-cw" class="w-4 h-4" aria-hidden="true"></i>
                                Reset Voice Settings
                            </button>
                        </div>
                    </section>
                </div>
            </div>
        </main>
    </div>
    <script>
        lucide.createIcons();
        
        class VoiceController {
            constructor() {
                this.isListening = false;
                this.recognition = null;
                this.initializeSpeechRecognition();
                this.initializeEventListeners();
                this.initializeAccessibility();
            }
            
            initializeSpeechRecognition() {
                // Check if browser supports speech recognition
                if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    this.recognition = new SpeechRecognition();
                    this.recognition.continuous = false;
                    this.recognition.interimResults = false;
                    this.recognition.lang = 'vi-VN';
                    
                    this.recognition.onstart = () => {
                        this.isListening = true;
                        this.updateVoiceStatus('listening');
                        this.updateVoiceButton(true);
                    };
                    
                    this.recognition.onresult = (event) => {
                        const transcript = event.results[0][0].transcript;
                        this.processVoiceCommand(transcript);
                    };
                    
                    this.recognition.onerror = (event) => {
                        console.error('Speech recognition error:', event.error);
                        this.updateVoiceStatus('error');
                        this.updateVoiceButton(false);
                    };
                    
                    this.recognition.onend = () => {
                        this.isListening = false;
                        this.updateVoiceStatus('ready');
                        this.updateVoiceButton(false);
                    };
                } else {
                    console.warn('Speech recognition not supported');
                    this.updateVoiceStatus('error');
                }
            }
            
            initializeEventListeners() {
                const voiceButton = document.getElementById('voice-button');
                voiceButton.addEventListener('click', () => this.toggleVoiceRecognition());
                
                // Navigation emergency controls
                document.getElementById('emergency-stop').addEventListener('click', () => this.emergencyStop());
                document.getElementById('pause-system').addEventListener('click', () => this.pauseSystem());
                document.getElementById('reset-system').addEventListener('click', () => this.resetSystem());
            }
            
            initializeAccessibility() {
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        e.preventDefault();
                        this.emergencyStop();
                    }
                    if (e.key === 'v' && e.ctrlKey) {
                        e.preventDefault();
                        this.toggleVoiceRecognition();
                    }
                });
            }
            
            toggleVoiceRecognition() {
                if (!this.recognition) {
                    alert('Speech recognition is not supported in this browser.');
                    return;
                }
                
                if (this.isListening) {
                    this.recognition.stop();
                } else {
                    this.recognition.start();
                }
            }
            
            updateVoiceStatus(status) {
                const statusElement = document.getElementById('voice-status');
                const statusDisplay = document.getElementById('voice-status-display');
                
                statusElement.className = `voice-status status-${status}`;
                
                switch (status) {
                    case 'listening':
                        statusElement.textContent = 'LISTENING';
                        statusDisplay.textContent = 'Listening... Speak now';
                        break;
                    case 'ready':
                        statusElement.textContent = 'READY';
                        statusDisplay.textContent = 'Click the microphone to start voice recognition';
                        break;
                    case 'error':
                        statusElement.textContent = 'ERROR';
                        statusDisplay.textContent = 'Voice recognition error. Please try again.';
                        break;
                }
            }
            
            updateVoiceButton(listening) {
                const voiceButton = document.getElementById('voice-button');
                if (listening) {
                    voiceButton.classList.add('listening');
                    voiceButton.innerHTML = '<i data-lucide="mic-off" class="w-12 h-12" aria-hidden="true"></i>';
                } else {
                    voiceButton.classList.remove('listening');
                    voiceButton.innerHTML = '<i data-lucide="mic" class="w-12 h-12" aria-hidden="true"></i>';
                }
                lucide.createIcons();
            }
            
            processVoiceCommand(transcript) {
                const transcriptElement = document.getElementById('voice-transcript');
                transcriptElement.textContent = transcript;
                transcriptElement.classList.remove('empty');
                
                // Simulate command processing
                setTimeout(() => {
                    this.executeCommand(transcript);
                }, 1000);
            }
            
            executeCommand(command) {
                const lowerCommand = command.toLowerCase();
                console.log('Executing command:', command);
                
                // Simple command matching
                if (lowerCommand.includes('start') || lowerCommand.includes('bật')) {
                    alert('System started');
                } else if (lowerCommand.includes('stop') || lowerCommand.includes('dừng')) {
                    alert('System stopped');
                } else if (lowerCommand.includes('emergency') || lowerCommand.includes('khẩn cấp')) {
                    this.emergencyStop();
                } else if (lowerCommand.includes('home') || lowerCommand.includes('về nhà')) {
                    alert('Returning to home position');
                } else if (lowerCommand.includes('status') || lowerCommand.includes('trạng thái')) {
                    alert('System status: Operational');
                } else if (lowerCommand.includes('battery') || lowerCommand.includes('pin')) {
                    alert('Battery level: 87%');
                } else {
                    alert(`Command not recognized: "${command}"`);
                }
            }
            
            emergencyStop() {
                console.log('EMERGENCY STOP ACTIVATED');
                alert('EMERGENCY STOP - All operations halted');
            }
            
            pauseSystem() {
                console.log('System Paused');
            }
            
            resetSystem() {
                console.log('System Reset');
            }
        }
        
        // Global functions for voice actions
        function speakCommand(command) {
            const transcriptElement = document.getElementById('voice-transcript');
            transcriptElement.textContent = command;
            transcriptElement.classList.remove('empty');
            
            // Simulate voice recognition
            setTimeout(() => {
                voiceController.executeCommand(command);
            }, 500);
        }
        
        function testVoice() {
            console.log('Testing voice recognition');
            alert('Voice recognition test started. Please speak a command.');
        }
        
        function clearHistory() {
            console.log('Clearing voice history');
            document.getElementById('voice-transcript').textContent = 'Your voice commands will appear here...';
            document.getElementById('voice-transcript').classList.add('empty');
            alert('Voice history cleared.');
        }
        
        function exportCommands() {
            console.log('Exporting voice commands');
            alert('Voice commands exported successfully.');
        }
        
        function trainVoice() {
            console.log('Training voice model');
            alert('Voice model training started. This may take several minutes.');
        }
        
        function resetVoice() {
            if (confirm('Are you sure you want to reset all voice settings? This action cannot be undone.')) {
                console.log('Resetting voice settings');
                alert('Voice settings reset to defaults.');
            }
        }
        
        function toggleSetting(element) {
            element.classList.toggle('active');
            const setting = element.dataset.setting;
            const isActive = element.classList.contains('active');
            console.log(`Voice setting ${setting} ${isActive ? 'enabled' : 'disabled'}`);
        }
        
        // Initialize voice controller when DOM is loaded
        let voiceController;
        document.addEventListener('DOMContentLoaded', () => {
            voiceController = new VoiceController();
        });
    </script>
</body>
</html>
