<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OHT-50 Master Module - API Interface</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            color: #333;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }

        .status-bar {
            display: flex;
            gap: 2rem;
            font-size: 0.9rem;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
        }

        .status-online { background: #4CAF50; }
        .status-offline { background: #f44336; }
        .status-warning { background: #ff9800; }

        .nav {
            background: white;
            padding: 1rem 2rem;
            border-bottom: 1px solid #ddd;
            display: flex;
            gap: 1rem;
        }

        .nav-button {
            padding: 0.5rem 1rem;
            border: none;
            background: #f0f0f0;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .nav-button:hover {
            background: #e0e0e0;
        }

        .nav-button.active {
            background: #667eea;
            color: white;
        }

        .main-content {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .module-card {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-left: 4px solid #667eea;
        }

        .module-card h3 {
            margin-bottom: 1rem;
            color: #667eea;
        }

        .module-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .api-section {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .api-section h2 {
            margin-bottom: 1rem;
            color: #333;
        }

        .api-endpoint {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 0.5rem;
            background: #f9f9f9;
        }

        .method {
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
            min-width: 60px;
            text-align: center;
        }

        .method.get { background: #4CAF50; color: white; }
        .method.post { background: #2196F3; color: white; }
        .method.put { background: #ff9800; color: white; }
        .method.delete { background: #f44336; color: white; }

        .endpoint-url {
            font-family: monospace;
            flex: 1;
        }

        .test-button {
            padding: 0.25rem 0.5rem;
            border: none;
            background: #667eea;
            color: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .test-button:hover {
            background: #5a6fd8;
        }

        .api-tester {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .tester-form {
            display: grid;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .form-row {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .form-row label {
            min-width: 100px;
            font-weight: bold;
        }

        .form-row input, .form-row select {
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            flex: 1;
        }

        .send-button {
            padding: 0.5rem 1rem;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }

        .send-button:hover {
            background: #45a049;
        }

        .response-area {
            background: #f5f5f5;
            padding: 1rem;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }

        .hidden {
            display: none;
        }

        .telemetry {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-top: 1rem;
        }

        .telemetry h3 {
            margin-bottom: 1rem;
            color: #667eea;
        }

        .telemetry-data {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .telemetry-item {
            padding: 0.5rem;
            background: #f9f9f9;
            border-radius: 4px;
            text-align: center;
        }

        .telemetry-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
        }

        .telemetry-label {
            font-size: 0.8rem;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>OHT-50 Master Module</h1>
        <div class="status-bar">
            <div class="status-item">
                <span class="status-indicator status-online"></span>
                System: ONLINE
            </div>
            <div class="status-item">
                <span class="status-indicator status-online"></span>
                Safety: SAFE
            </div>
            <div class="status-item">
                <span class="status-indicator status-offline"></span>
                E-Stop: ACTIVE
            </div>
            <div class="status-item">
                <span class="status-indicator status-online"></span>
                API: Port 8080
            </div>
        </div>
    </div>

    <div class="nav">
        <button class="nav-button active" onclick="showSection('dashboard')">Dashboard</button>
        <button class="nav-button" onclick="showSection('api-docs')">API Documentation</button>
        <button class="nav-button" onclick="showSection('api-tester')">API Testing</button>
        <button class="nav-button" onclick="showSection('telemetry')">Telemetry</button>
    </div>

    <div class="main-content">
        <!-- Dashboard Section -->
        <div id="dashboard" class="section">
            <div class="dashboard">
                <div class="module-card">
                    <h3>Power Module</h3>
                    <div class="module-status">
                        <span>Status: <span class="status-indicator status-online"></span> ONLINE</span>
                        <span>Battery: 85%</span>
                    </div>
                    <div>Voltage: 24.5V</div>
                    <div>Current: 2.1A</div>
                    <div>Temperature: 45°C</div>
                </div>

                <div class="module-card">
                    <h3>Safety Module</h3>
                    <div class="module-status">
                        <span>Status: <span class="status-indicator status-online"></span> ONLINE</span>
                        <span>Safety: SAFE</span>
                    </div>
                    <div>Zone 1: CLEAR</div>
                    <div>Zone 2: CLEAR</div>
                    <div>Zone 3: CLEAR</div>
                </div>

                <div class="module-card">
                    <h3>Motor Module</h3>
                    <div class="module-status">
                        <span>Status: <span class="status-indicator status-online"></span> ONLINE</span>
                        <span>State: IDLE</span>
                    </div>
                    <div>Position: 1000mm</div>
                    <div>Velocity: 0mm/s</div>
                    <div>Target: 1500mm</div>
                </div>

                <div class="module-card">
                    <h3>Dock Module</h3>
                    <div class="module-status">
                        <span>Status: <span class="status-indicator status-online"></span> ONLINE</span>
                        <span>State: DOCKED</span>
                    </div>
                    <div>Distance: 0mm</div>
                    <div>Alignment: 0°</div>
                    <div>Charging: ACTIVE</div>
                </div>
            </div>

            <div class="telemetry">
                <h3>Real-time Telemetry</h3>
                <div class="telemetry-data">
                    <div class="telemetry-item">
                        <div class="telemetry-value">1000mm</div>
                        <div class="telemetry-label">Position</div>
                    </div>
                    <div class="telemetry-item">
                        <div class="telemetry-value">0mm/s</div>
                        <div class="telemetry-label">Velocity</div>
                    </div>
                    <div class="telemetry-item">
                        <div class="telemetry-value">0mm/s²</div>
                        <div class="telemetry-label">Acceleration</div>
                    </div>
                    <div class="telemetry-item">
                        <div class="telemetry-value">85%</div>
                        <div class="telemetry-label">Battery</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- API Documentation Section -->
        <div id="api-docs" class="section hidden">
            <div class="api-section">
                <h2>System API Endpoints</h2>
                <div class="api-endpoint">
                    <span class="method get">GET</span>
                    <span class="endpoint-url">/api/v1/system/status</span>
                    <button class="test-button" onclick="testEndpoint('GET', '/api/v1/system/status')">Test</button>
                </div>
                <div class="api-endpoint">
                    <span class="method get">GET</span>
                    <span class="endpoint-url">/api/v1/system/health</span>
                    <button class="test-button" onclick="testEndpoint('GET', '/api/v1/system/health')">Test</button>
                </div>
            </div>

            <div class="api-section">
                <h2>Safety API Endpoints</h2>
                <div class="api-endpoint">
                    <span class="method get">GET</span>
                    <span class="endpoint-url">/api/v1/safety/status</span>
                    <button class="test-button" onclick="testEndpoint('GET', '/api/v1/safety/status')">Test</button>
                </div>
                <div class="api-endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-url">/api/v1/safety/estop</span>
                    <button class="test-button" onclick="testEndpoint('POST', '/api/v1/safety/estop')">Test</button>
                </div>
            </div>

            <div class="api-section">
                <h2>Module API Endpoints</h2>
                <div class="api-endpoint">
                    <span class="method get">GET</span>
                    <span class="endpoint-url">/api/v1/modules/list</span>
                    <button class="test-button" onclick="testEndpoint('GET', '/api/v1/modules/list')">Test</button>
                </div>
                <div class="api-endpoint">
                    <span class="method get">GET</span>
                    <span class="endpoint-url">/api/v1/modules/power/status</span>
                    <button class="test-button" onclick="testEndpoint('GET', '/api/v1/modules/power/status')">Test</button>
                </div>
                <div class="api-endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-url">/api/v1/modules/motor/control</span>
                    <button class="test-button" onclick="testEndpoint('POST', '/api/v1/modules/motor/control')">Test</button>
                </div>
            </div>
        </div>

        <!-- API Testing Section -->
        <div id="api-tester" class="section hidden">
            <div class="api-tester">
                <h2>API Testing Interface</h2>
                <div class="tester-form">
                    <div class="form-row">
                        <label>Method:</label>
                        <select id="method">
                            <option value="GET">GET</option>
                            <option value="POST">POST</option>
                            <option value="PUT">PUT</option>
                            <option value="DELETE">DELETE</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label>URL:</label>
                        <input type="text" id="url" value="http://localhost:8080/api/v1/system/status" placeholder="Enter API URL">
                    </div>
                    <div class="form-row">
                        <label>Headers:</label>
                        <input type="text" id="headers" value='{"Content-Type": "application/json"}' placeholder="JSON headers">
                    </div>
                    <div class="form-row">
                        <label>Body:</label>
                        <input type="text" id="body" placeholder="Request body (for POST/PUT)">
                    </div>
                    <div class="form-row">
                        <button class="send-button" onclick="sendRequest()">Send Request</button>
                    </div>
                </div>
                <div class="response-area" id="response">Response will appear here...</div>
            </div>
        </div>

        <!-- Telemetry Section -->
        <div id="telemetry" class="section hidden">
            <div class="api-section">
                <h2>Real-time Telemetry Data</h2>
                <div class="telemetry-data">
                    <div class="telemetry-item">
                        <div class="telemetry-value" id="pos-value">1000mm</div>
                        <div class="telemetry-label">Position</div>
                    </div>
                    <div class="telemetry-item">
                        <div class="telemetry-value" id="vel-value">0mm/s</div>
                        <div class="telemetry-label">Velocity</div>
                    </div>
                    <div class="telemetry-item">
                        <div class="telemetry-value" id="acc-value">0mm/s²</div>
                        <div class="telemetry-label">Acceleration</div>
                    </div>
                    <div class="telemetry-item">
                        <div class="telemetry-value" id="bat-value">85%</div>
                        <div class="telemetry-label">Battery</div>
                    </div>
                    <div class="telemetry-item">
                        <div class="telemetry-value" id="temp-value">45°C</div>
                        <div class="telemetry-label">Temperature</div>
                    </div>
                    <div class="telemetry-item">
                        <div class="telemetry-value" id="voltage-value">24.5V</div>
                        <div class="telemetry-label">Voltage</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.remove('hidden');
            
            // Update navigation
            document.querySelectorAll('.nav-button').forEach(button => {
                button.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function testEndpoint(method, url) {
            // Simulate API call
            const response = {
                method: method,
                url: url,
                status: 200,
                data: {
                    timestamp: new Date().toISOString(),
                    status: "success",
                    message: `Test call to ${method} ${url}`,
                    data: {
                        system_name: "OHT-50",
                        status: "ONLINE",
                        uptime_ms: 3600000
                    }
                }
            };
            
            // Show response in tester
            showSection('api-tester');
            document.getElementById('method').value = method;
            document.getElementById('url').value = `http://localhost:8080${url}`;
            document.getElementById('response').textContent = JSON.stringify(response, null, 2);
        }

        function sendRequest() {
            const method = document.getElementById('method').value;
            const url = document.getElementById('url').value;
            const headers = document.getElementById('headers').value;
            const body = document.getElementById('body').value;
            
            // Simulate API call
            const response = {
                method: method,
                url: url,
                status: 200,
                headers: JSON.parse(headers || '{}'),
                body: body || null,
                response: {
                    timestamp: new Date().toISOString(),
                    status: "success",
                    message: `Request to ${method} ${url} completed`,
                    data: {
                        system_name: "OHT-50",
                        status: "ONLINE",
                        uptime_ms: 3600000,
                        modules: {
                            power: { status: "ONLINE", battery: 85 },
                            safety: { status: "ONLINE", safe: true },
                            motor: { status: "ONLINE", position: 1000 },
                            dock: { status: "ONLINE", docked: true }
                        }
                    }
                }
            };
            
            document.getElementById('response').textContent = JSON.stringify(response, null, 2);
        }

        // Simulate real-time updates
        function updateTelemetry() {
            const pos = Math.floor(Math.random() * 2000) + 500;
            const vel = Math.floor(Math.random() * 100);
            const acc = Math.floor(Math.random() * 50);
            const bat = Math.floor(Math.random() * 20) + 80;
            const temp = Math.floor(Math.random() * 10) + 40;
            const voltage = (Math.random() * 2 + 23).toFixed(1);
            
            document.getElementById('pos-value').textContent = `${pos}mm`;
            document.getElementById('vel-value').textContent = `${vel}mm/s`;
            document.getElementById('acc-value').textContent = `${acc}mm/s²`;
            document.getElementById('bat-value').textContent = `${bat}%`;
            document.getElementById('temp-value').textContent = `${temp}°C`;
            document.getElementById('voltage-value').textContent = `${voltage}V`;
        }

        // Update telemetry every 2 seconds
        setInterval(updateTelemetry, 2000);
    </script>
</body>
</html>
