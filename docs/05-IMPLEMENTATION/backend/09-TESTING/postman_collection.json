{
  "info": {
    "name": "OHT-50 Backend API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": "Postman collection for OHT-50 Backend endpoints"
  },
  "variable": [
    {"key": "host", "value": "http://localhost:8000"},
    {"key": "token", "value": ""}
  ],
  "item": [
    {
      "name": "Health - Basic",
      "request": {"method": "GET", "url": "{{host}}/health/"}
    },
    {
      "name": "Auth - Login",
      "request": {
        "method": "POST",
        "header": [{"key": "Content-Type", "value": "application/json"}],
        "url": "{{host}}/api/v1/auth/login",
        "body": {"mode": "raw", "raw": "{\n  \"username\": \"admin\",\n  \"password\": \"admin\"\n}"}
      }
    },
    {
      "name": "Config - Get Current",
      "request": {
        "method": "GET",
        "header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
        "url": "{{host}}/api/v1/config/"
      }
    },
    {
      "name": "Config - History",
      "request": {
        "method": "GET",
        "header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
        "url": "{{host}}/api/v1/config/history?limit=5"
      }
    },
    {
      "name": "Config - Version",
      "request": {
        "method": "GET",
        "header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
        "url": "{{host}}/api/v1/config/version/1"
      }
    },
    {
      "name": "Config - Update",
      "request": {
        "method": "PUT",
        "header": [
          {"key": "Authorization", "value": "Bearer {{token}}"},
          {"key": "Content-Type", "value": "application/json"}
        ],
        "url": "{{host}}/api/v1/config/?user=alice",
        "body": {"mode": "raw", "raw": "{\n  \"version\": 0,\n  \"hardware\": {\n    \"motor\": {\"interface\": \"rs485\", \"r\": 0.05, \"vmax_mms\": 100, \"amax_mms2\": 100, \"jmax_mms3\": 1000},\n    \"encoder\": {\"type\": \"incremental\", \"resolution_ppr\": 1000, \"invert\": false}\n  },\n  \"safety\": {\"zones\":[{\"start_mm\":0,\"end_mm\":200,\"vmax_mms\":200}], \"estop_reset_policy\": \"manual\"},\n  \"telemetry\": {\"ws_hz\": 10},\n  \"comm\": {\"rs485\": {\"device\": \"/dev/ttyOHT485\", \"baud\": 115200}}\n}"}
      }
    },
    {
      "name": "Config - Rollback",
      "request": {
        "method": "POST",
        "header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
        "url": "{{host}}/api/v1/config/rollback/1?user=alice"
      }
    },
    {
      "name": "Config - Export JSON",
      "request": {
        "method": "GET",
        "header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
        "url": "{{host}}/api/v1/config/export?format=json"
      }
    },
    {
      "name": "Config - Validate",
      "request": {
        "method": "POST",
        "header": [
          {"key": "Authorization", "value": "Bearer {{token}}"},
          {"key": "Content-Type", "value": "application/json"}
        ],
        "url": "{{host}}/api/v1/config/validate",
        "body": {"mode": "raw", "raw": "{\n  \"version\": 0,\n  \"hardware\": {\n    \"motor\": {\"interface\": \"rs485\", \"r\": 0.05, \"vmax_mms\": 100, \"amax_mms2\": 100, \"jmax_mms3\": 1000},\n    \"encoder\": {\"type\": \"incremental\", \"resolution_ppr\": 1000, \"invert\": false}\n  },\n  \"safety\": {\"zones\":[{\"start_mm\":0,\"end_mm\":200,\"vmax_mms\":200}], \"estop_reset_policy\": \"manual\"},\n  \"telemetry\": {\"ws_hz\": 10},\n  \"comm\": {\"rs485\": {\"device\": \"/dev/ttyOHT485\", \"baud\": 115200}}\n}"}
      }
    },
    {
      "name": "Telemetry - Current",
      "request": {"method": "GET", "url": "{{host}}/api/v1/telemetry/current"}
    },
    {
      "name": "Telemetry - History",
      "request": {"method": "GET", "url": "{{host}}/api/v1/telemetry/history?limit=10"}
    },
    {
      "name": "Telemetry - Rate",
      "request": {"method": "POST", "url": "{{host}}/api/v1/telemetry/rate?hz=20"}
    },
    {
      "name": "Center - Mission",
      "request": {
        "method": "POST",
        "header": [{"key": "Content-Type", "value": "application/json"}],
        "url": "{{host}}/api/v1/center/mission",
        "body": {"mode": "raw", "raw": "{\n  \"mission_id\": \"m1\",\n  \"mission_type\": \"move_to\",\n  \"target_position\": {\"x\": 1, \"y\": 2, \"z\": 0, \"theta\": 0}\n}"}
      }
    },
    {
      "name": "Center - Permission",
      "request": {
        "method": "POST",
        "header": [{"key": "Content-Type", "value": "application/json"}],
        "url": "{{host}}/api/v1/center/permission",
        "body": {"mode": "raw", "raw": "{\n  \"action\": \"move\",\n  \"resource\": \"robot\",\n  \"context\": {\"zone\": \"A\"}\n}"}
      }
    },
    {
      "name": "Center - Modules (proxy)",
      "request": {"method": "GET", "url": "{{host}}/api/v1/center/modules"}
    },
    {
      "name": "Center - Points (proxy)",
      "request": {"method": "GET", "url": "{{host}}/api/v1/center/points"}
    }
  ]
}
