<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OHT-50 - Configuration</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../../themes/theme_oht50_unified.css">
    <link rel="stylesheet" href="../../themes/theme_components.css">
    <style>
        .page-container{display:flex;flex-direction:column;min-height:100vh;background:var(--bg-secondary);padding-top:80px}
        .top-navigation{position:fixed;top:0;left:0;right:0;display:flex;align-items:center;justify-content:space-between;padding:var(--space-md) var(--space-lg);background:var(--bg-primary);border-bottom:var(--border-width-1) solid var(--border-color-light);box-shadow:var(--shadow-sm);z-index:var(--z-sticky)}
        .nav-brand{display:flex;align-items:center;gap:var(--space-sm);font-family:var(--font-display);font-size:var(--text-xl);font-weight:var(--font-bold);color:var(--primary-orange)}
        .nav-emergency-controls{display:flex;align-items:center;gap:var(--space-sm);margin-left:var(--space-lg)}
        .btn-emergency-nav{display:flex;align-items:center;gap:var(--space-xs);padding:var(--space-sm) var(--space-md);background:var(--safety-red);color:#fff;border:0;border-radius:var(--radius-md);font-size:var(--text-sm);font-weight:var(--font-bold);cursor:pointer;transition:all var(--transition-fast);box-shadow:var(--shadow-sm)}
        .btn-emergency-nav:hover{background:var(--error-red-dark);transform:translateY(-1px);box-shadow:var(--shadow-md)}
        .btn-nav{display:flex;align-items:center;gap:var(--space-xs);padding:var(--space-sm) var(--space-md);border:var(--border-width-1) solid var(--border-color-light);border-radius:var(--radius-md);font-size:var(--text-sm);font-weight:var(--font-medium);cursor:pointer;transition:all var(--transition-fast)}
        .btn-warning-nav{background:var(--warning-yellow);color:var(--industrial-gray-900);border-color:var(--warning-yellow)}
        .btn-warning-nav:hover{background:var(--warning-yellow-dark);color:#fff}
        .btn-success-nav{background:var(--success-green);color:#fff;border-color:var(--success-green)}
        .btn-success-nav:hover{background:var(--success-green-dark)}
        .nav-menu{display:flex;align-items:center;gap:var(--space-lg)}
        .nav-item{display:flex;align-items:center;gap:var(--space-xs);padding:var(--space-sm) var(--space-md);color:var(--industrial-gray-700);text-decoration:none;border-radius:var(--radius-md);transition:all var(--transition-fast);font-weight:var(--font-medium)}
        .nav-item:hover{background:var(--industrial-gray-100);color:var(--primary-orange)}
        .nav-item.active{background:var(--primary-orange);color:#fff}
        .nav-actions{display:flex;align-items:center;gap:var(--space-sm)}
        .nav-btn{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:var(--bg-secondary);border:var(--border-width-1) solid var(--border-color-light);border-radius:var(--radius-md);color:var(--industrial-gray-600);transition:all var(--transition-fast)}
        .nav-btn:hover{background:var(--primary-orange);color:#fff;border-color:var(--primary-orange)}
        .page-main{flex:1;padding:var(--space-lg)}
        .page-content{max-width:1920px;margin:0 auto}
        .breadcrumb-nav{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm) 0;margin-bottom:var(--space-lg)}
        .breadcrumb-item{color:var(--industrial-gray-600);text-decoration:none;font-size:var(--text-sm)}
        .breadcrumb-item:hover{color:var(--primary-orange)}
        .breadcrumb-item.active{color:var(--industrial-gray-900);font-weight:var(--font-medium)}
        .breadcrumb-separator{color:var(--industrial-gray-400)}
        .content-grid{display:grid;grid-template-columns:repeat(12,1fr);gap:var(--space-lg)}
        .page-header{margin-bottom:var(--space-xl)}
        .page-title{font-size:var(--text-3xl);font-weight:var(--font-bold);color:var(--industrial-gray-900);margin-bottom:var(--space-sm)}
        .page-description{font-size:var(--text-lg);color:var(--industrial-gray-600)}
        
        /* Configuration Specific Styles */
        .config-card{background:var(--bg-primary);border:var(--border-width-1) solid var(--border-color-light);border-radius:var(--radius-lg);padding:var(--space-xl);box-shadow:var(--shadow-sm)}
        .config-card-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--space-lg)}
        .config-card-title{font-size:var(--text-xl);font-weight:var(--font-semibold);color:var(--industrial-gray-900)}
        .config-status{padding:var(--space-xs) var(--space-sm);border-radius:var(--radius-full);font-size:var(--text-xs);font-weight:var(--font-bold);text-transform:uppercase}
        .status-saved{background:var(--success-green);color:white}
        .status-unsaved{background:var(--warning-yellow);color:var(--industrial-gray-900)}
        .status-error{background:var(--error-red);color:white}
        
        /* Form Styles */
        .form-group{margin-bottom:var(--space-lg)}
        .form-label{display:block;font-weight:var(--font-medium);color:var(--industrial-gray-900);margin-bottom:var(--space-sm)}
        .form-input{width:100%;padding:var(--space-sm) var(--space-md);border:var(--border-width-1) solid var(--border-color-light);border-radius:var(--radius-md);font-size:var(--text-sm);transition:all var(--transition-fast)}
        .form-input:focus{outline:none;border-color:var(--primary-orange);box-shadow:0 0 0 3px rgba(255, 165, 0, 0.1)}
        .form-select{width:100%;padding:var(--space-sm) var(--space-md);border:var(--border-width-1) solid var(--border-color-light);border-radius:var(--radius-md);font-size:var(--text-sm);background:white;transition:all var(--transition-fast)}
        .form-select:focus{outline:none;border-color:var(--primary-orange);box-shadow:0 0 0 3px rgba(255, 165, 0, 0.1)}
        .form-textarea{width:100%;padding:var(--space-sm) var(--space-md);border:var(--border-width-1) solid var(--border-color-light);border-radius:var(--radius-md);font-size:var(--text-sm);min-height:100px;resize:vertical;transition:all var(--transition-fast)}
        .form-textarea:focus{outline:none;border-color:var(--primary-orange);box-shadow:0 0 0 3px rgba(255, 165, 0, 0.1)}
        .form-checkbox{display:flex;align-items:center;gap:var(--space-sm);margin-bottom:var(--space-sm)}
        .form-checkbox input[type="checkbox"]{width:18px;height:18px;accent-color:var(--primary-orange)}
        .form-radio{display:flex;align-items:center;gap:var(--space-sm);margin-bottom:var(--space-sm)}
        .form-radio input[type="radio"]{width:18px;height:18px;accent-color:var(--primary-orange)}
        
        /* Button Styles */
        .btn-primary{background:var(--primary-orange);color:white;border:none;padding:var(--space-sm) var(--space-lg);border-radius:var(--radius-md);font-weight:var(--font-medium);cursor:pointer;transition:all var(--transition-fast)}
        .btn-primary:hover{background:var(--primary-orange-dark);transform:translateY(-1px);box-shadow:var(--shadow-md)}
        .btn-secondary{background:var(--bg-secondary);color:var(--industrial-gray-700);border:var(--border-width-1) solid var(--border-color-light);padding:var(--space-sm) var(--space-lg);border-radius:var(--radius-md);font-weight:var(--font-medium);cursor:pointer;transition:all var(--transition-fast)}
        .btn-secondary:hover{background:var(--industrial-gray-100)}
        .btn-danger{background:var(--error-red);color:white;border:none;padding:var(--space-sm) var(--space-lg);border-radius:var(--radius-md);font-weight:var(--font-medium);cursor:pointer;transition:all var(--transition-fast)}
        .btn-danger:hover{background:var(--error-red-dark)}
        
        /* Configuration Categories */
        .config-categories{display:flex;gap:var(--space-md);margin-bottom:var(--space-lg);border-bottom:var(--border-width-1) solid var(--border-color-light)}
        .config-category{padding:var(--space-md) var(--space-lg);border:none;background:none;color:var(--industrial-gray-600);font-weight:var(--font-medium);cursor:pointer;transition:all var(--transition-fast);border-bottom:3px solid transparent}
        .config-category:hover{color:var(--primary-orange)}
        .config-category.active{color:var(--primary-orange);border-bottom-color:var(--primary-orange)}
        
        /* Configuration Content */
        .config-content{display:none}
        .config-content.active{display:block}
        
        /* Parameter Grid */
        .param-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--space-lg)}
        .param-item{background:var(--bg-secondary);padding:var(--space-md);border-radius:var(--radius-md);border:var(--border-width-1) solid var(--border-color-light)}
        .param-label{font-weight:var(--font-medium);color:var(--industrial-gray-900);margin-bottom:var(--space-xs)}
        .param-value{font-family:var(--font-mono);color:var(--primary-orange);font-size:var(--text-lg)}
        .param-unit{color:var(--industrial-gray-600);font-size:var(--text-sm)}
        
        /* Action Buttons */
        .action-buttons{display:flex;gap:var(--space-md);margin-top:var(--space-xl);padding-top:var(--space-lg);border-top:var(--border-width-1) solid var(--border-color-light)}
        
        /* Responsive Design */
        @media (max-width:1024px){.nav-menu{gap:var(--space-md)}.nav-item{padding:var(--space-xs) var(--space-sm);font-size:var(--text-sm)}.param-grid{grid-template-columns:1fr}}
        @media (max-width:768px){.nav-menu{display:none}.nav-emergency-controls{margin-left:var(--space-sm);gap:var(--space-xs)}.btn-emergency-nav,.btn-nav{padding:var(--space-xs) var(--space-sm);font-size:var(--text-xs)}.btn-emergency-nav i,.btn-nav i{width:12px;height:12px}.page-container{padding-top:60px}.content-grid{grid-template-columns:repeat(6,1fr);gap:var(--space-md)}.config-categories{flex-direction:column}.action-buttons{flex-direction:column}}
        @media (max-width:640px){.content-grid{grid-template-columns:repeat(2,1fr);gap:var(--space-sm)}}
        
        .skip-link{position:absolute;top:-40px;left:6px;background:var(--primary-orange);color:#fff;padding:var(--space-sm) var(--space-md);text-decoration:none;border-radius:var(--radius-md);z-index:var(--z-emergency)}
        .skip-link:focus{top:6px}
        .nav-item:focus-visible,.btn:focus-visible,.nav-btn:focus-visible,.config-category:focus-visible,.form-input:focus-visible,.form-select:focus-visible,.form-textarea:focus-visible{outline:var(--border-width-2) solid var(--primary-orange);outline-offset:var(--space-xs)}
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <div class="page-container">
        <nav class="top-navigation" role="navigation" aria-label="Main navigation">
            <div class="nav-brand">
                <i data-lucide="activity" class="w-6 h-6" aria-hidden="true"></i>
                <span>OHT-50</span>
            </div>
            <div class="nav-emergency-controls">
                <button class="btn-emergency-nav" id="emergency-stop" aria-label="Emergency Stop">
                    <i data-lucide="square" class="w-4 h-4" aria-hidden="true"></i>
                    E-STOP
                </button>
                <button class="btn-nav btn-warning-nav" id="pause-system" aria-label="Pause System">
                    <i data-lucide="pause" class="w-4 h-4" aria-hidden="true"></i>
                    Pause
                </button>
                <button class="btn-nav btn-success-nav" id="reset-system" aria-label="Reset System">
                    <i data-lucide="refresh-cw" class="w-4 h-4" aria-hidden="true"></i>
                    Reset
                </button>
            </div>
            <div class="nav-menu">
                <a href="../core_pages/2-1-dashboard-main.html" class="nav-item" aria-label="Dashboard">
                    <i data-lucide="layout-dashboard" class="w-4 h-4" aria-hidden="true"></i>
                    Dashboard
                </a>
                <a href="../core_pages/3-1-control-panel.html" class="nav-item" aria-label="Control Panel">
                    <i data-lucide="gamepad-2" class="w-4 h-4" aria-hidden="true"></i>
                    Control Panel
                </a>
                <a href="../core_pages/4-1-map-interface.html" class="nav-item" aria-label="Map & Navigation">
                    <i data-lucide="map" class="w-4 h-4" aria-hidden="true"></i>
                    Map & Navigation
                </a>
                <a href="5-1-monitoring.html" class="nav-item" aria-label="Monitoring">
                    <i data-lucide="monitor" class="w-4 h-4" aria-hidden="true"></i>
                    Monitoring
                </a>
                <a href="6-1-configuration.html" class="nav-item active" aria-current="page" aria-label="Configuration">
                    <i data-lucide="settings" class="w-4 h-4" aria-hidden="true"></i>
                    Configuration
                </a>
                <a href="7-1-reports.html" class="nav-item" aria-label="Reports">
                    <i data-lucide="file-text" class="w-4 h-4" aria-hidden="true"></i>
                    Reports
                </a>
                <a href="../advanced_pages/8-1-alerts.html" class="nav-item" aria-label="Alerts">
                    <i data-lucide="alert-triangle" class="w-4 h-4" aria-hidden="true"></i>
                    Alerts
                </a>
                <a href="../advanced_pages/9-1-voice-control.html" class="nav-item" aria-label="Voice Control">
                    <i data-lucide="mic" class="w-4 h-4" aria-hidden="true"></i>
                    Voice Control
                </a>
            </div>
            <div class="nav-actions">
                <button class="nav-btn" aria-label="Notifications">
                    <i data-lucide="bell" class="w-5 h-5" aria-hidden="true"></i>
                </button>
                <button class="nav-btn" aria-label="User menu">
                    <i data-lucide="user" class="w-5 h-5" aria-hidden="true"></i>
                </button>
            </div>
        </nav>
        <main id="main-content" class="page-main">
            <div class="page-content">
                <nav class="breadcrumb-nav" aria-label="Breadcrumb">
                    <a href="../core_pages/2-1-dashboard-main.html" class="breadcrumb-item">Dashboard</a>
                    <span class="breadcrumb-separator">/</span>
                    <span class="breadcrumb-item active">Configuration</span>
                </nav>
                <header class="page-header">
                    <h1 class="page-title">Configuration</h1>
                    <p class="page-description">System configuration and parameter management for OHT-50</p>
                </header>
                <div class="content-grid">
                    <!-- Configuration Categories -->
                    <section class="config-card" style="grid-column: span 12;">
                        <div class="config-categories">
                            <button class="config-category active" data-category="safety" aria-label="Safety Configuration">
                                <i data-lucide="shield" class="w-4 h-4" aria-hidden="true"></i>
                                Safety
                            </button>
                            <button class="config-category" data-category="operational" aria-label="Operational Configuration">
                                <i data-lucide="settings" class="w-4 h-4" aria-hidden="true"></i>
                                Operational
                            </button>
                            <button class="config-category" data-category="system" aria-label="System Configuration">
                                <i data-lucide="cpu" class="w-4 h-4" aria-hidden="true"></i>
                                System
                            </button>
                            <button class="config-category" data-category="interface" aria-label="Interface Configuration">
                                <i data-lucide="monitor" class="w-4 h-4" aria-hidden="true"></i>
                                Interface
                            </button>
                        </div>
                    </section>

                    <!-- Safety Configuration -->
                    <section class="config-content active" id="safety-config" style="grid-column: span 12;">
                        <div class="config-card">
                            <div class="config-card-header">
                                <h2 class="config-card-title">Safety Configuration</h2>
                                <span class="config-status status-saved" id="safety-status">SAVED</span>
                            </div>
                            <div class="param-grid">
                                <div class="param-item">
                                    <div class="param-label">Emergency Stop Response Time</div>
                                    <div class="param-value">100</div>
                                    <div class="param-unit">milliseconds</div>
                                </div>
                                <div class="param-item">
                                    <div class="param-label">Safety Zone Radius</div>
                                    <div class="param-value">2.5</div>
                                    <div class="param-unit">meters</div>
                                </div>
                                <div class="param-item">
                                    <div class="param-label">Maximum Speed Limit</div>
                                    <div class="param-value">5.0</div>
                                    <div class="param-unit">m/s</div>
                                </div>
                                <div class="param-item">
                                    <div class="param-label">Obstacle Detection Range</div>
                                    <div class="param-value">10.0</div>
                                    <div class="param-unit">meters</div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Safety Protocols</label>
                                <div class="form-checkbox">
                                    <input type="checkbox" id="safety-emergency-stop" checked>
                                    <label for="safety-emergency-stop">Enable Emergency Stop</label>
                                </div>
                                <div class="form-checkbox">
                                    <input type="checkbox" id="safety-collision-detection" checked>
                                    <label for="safety-collision-detection">Enable Collision Detection</label>
                                </div>
                                <div class="form-checkbox">
                                    <input type="checkbox" id="safety-speed-limit" checked>
                                    <label for="safety-speed-limit">Enable Speed Limiting</label>
                                </div>
                                <div class="form-checkbox">
                                    <input type="checkbox" id="safety-zone-monitoring" checked>
                                    <label for="safety-zone-monitoring">Enable Zone Monitoring</label>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Operational Configuration -->
                    <section class="config-content" id="operational-config" style="grid-column: span 12;">
                        <div class="config-card">
                            <div class="config-card-header">
                                <h2 class="config-card-title">Operational Configuration</h2>
                                <span class="config-status status-unsaved" id="operational-status">UNSAVED</span>
                            </div>
                            <div class="form-group">
                                <label for="operational-mode" class="form-label">Default Operating Mode</label>
                                <select id="operational-mode" class="form-select">
                                    <option value="auto">Automatic</option>
                                    <option value="manual" selected>Manual</option>
                                    <option value="semi">Semi-Automatic</option>
                                    <option value="maintenance">Maintenance</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="operational-speed" class="form-label">Default Speed (%)</label>
                                <input type="number" id="operational-speed" class="form-input" value="50" min="10" max="100">
                            </div>
                            <div class="form-group">
                                <label for="operational-acceleration" class="form-label">Acceleration Rate</label>
                                <select id="operational-acceleration" class="form-select">
                                    <option value="slow">Slow</option>
                                    <option value="normal" selected>Normal</option>
                                    <option value="fast">Fast</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="operational-path-planning" class="form-label">Path Planning Algorithm</label>
                                <select id="operational-path-planning" class="form-select">
                                    <option value="a-star">A* Algorithm</option>
                                    <option value="dijkstra" selected>Dijkstra</option>
                                    <option value="rrt">RRT</option>
                                </select>
                            </div>
                        </div>
                    </section>

                    <!-- System Configuration -->
                    <section class="config-content" id="system-config" style="grid-column: span 12;">
                        <div class="config-card">
                            <div class="config-card-header">
                                <h2 class="config-card-title">System Configuration</h2>
                                <span class="config-status status-saved" id="system-status">SAVED</span>
                            </div>
                            <div class="form-group">
                                <label for="system-hostname" class="form-label">System Hostname</label>
                                <input type="text" id="system-hostname" class="form-input" value="OHT-50-001">
                            </div>
                            <div class="form-group">
                                <label for="system-timezone" class="form-label">Timezone</label>
                                <select id="system-timezone" class="form-select">
                                    <option value="UTC">UTC</option>
                                    <option value="Asia/Ho_Chi_Minh" selected>Asia/Ho Chi Minh</option>
                                    <option value="Asia/Tokyo">Asia/Tokyo</option>
                                    <option value="Europe/London">Europe/London</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="system-log-level" class="form-label">Log Level</label>
                                <select id="system-log-level" class="form-select">
                                    <option value="debug">Debug</option>
                                    <option value="info" selected>Info</option>
                                    <option value="warning">Warning</option>
                                    <option value="error">Error</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="system-auto-update" class="form-label">Auto Update Settings</label>
                                <div class="form-checkbox">
                                    <input type="checkbox" id="system-auto-update" checked>
                                    <label for="system-auto-update">Enable Automatic Updates</label>
                                </div>
                                <div class="form-checkbox">
                                    <input type="checkbox" id="system-backup" checked>
                                    <label for="system-backup">Enable Automatic Backup</label>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Interface Configuration -->
                    <section class="config-content" id="interface-config" style="grid-column: span 12;">
                        <div class="config-card">
                            <div class="config-card-header">
                                <h2 class="config-card-title">Interface Configuration</h2>
                                <span class="config-status status-saved" id="interface-status">SAVED</span>
                            </div>
                            <div class="form-group">
                                <label for="interface-theme" class="form-label">Theme</label>
                                <select id="interface-theme" class="form-select">
                                    <option value="light">Light</option>
                                    <option value="dark" selected>Dark</option>
                                    <option value="auto">Auto</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="interface-language" class="form-label">Language</label>
                                <select id="interface-language" class="form-select">
                                    <option value="en">English</option>
                                    <option value="vi" selected>Tiếng Việt</option>
                                    <option value="ja">日本語</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="interface-refresh-rate" class="form-label">Refresh Rate (Hz)</label>
                                <select id="interface-refresh-rate" class="form-select">
                                    <option value="30">30 Hz</option>
                                    <option value="60" selected>60 Hz</option>
                                    <option value="120">120 Hz</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="interface-accessibility" class="form-label">Accessibility Settings</label>
                                <div class="form-checkbox">
                                    <input type="checkbox" id="interface-high-contrast">
                                    <label for="interface-high-contrast">High Contrast Mode</label>
                                </div>
                                <div class="form-checkbox">
                                    <input type="checkbox" id="interface-screen-reader" checked>
                                    <label for="interface-screen-reader">Screen Reader Support</label>
                                </div>
                                <div class="form-checkbox">
                                    <input type="checkbox" id="interface-keyboard-nav" checked>
                                    <label for="interface-keyboard-nav">Keyboard Navigation</label>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Action Buttons -->
                    <section class="config-card" style="grid-column: span 12;">
                        <div class="action-buttons">
                            <button class="btn-primary" id="save-config" aria-label="Save Configuration">
                                <i data-lucide="save" class="w-4 h-4" aria-hidden="true"></i>
                                Save Configuration
                            </button>
                            <button class="btn-secondary" id="reset-config" aria-label="Reset to Defaults">
                                <i data-lucide="refresh-cw" class="w-4 h-4" aria-hidden="true"></i>
                                Reset to Defaults
                            </button>
                            <button class="btn-secondary" id="export-config" aria-label="Export Configuration">
                                <i data-lucide="download" class="w-4 h-4" aria-hidden="true"></i>
                                Export Configuration
                            </button>
                            <button class="btn-secondary" id="import-config" aria-label="Import Configuration">
                                <i data-lucide="upload" class="w-4 h-4" aria-hidden="true"></i>
                                Import Configuration
                            </button>
                            <button class="btn-danger" id="restart-system" aria-label="Restart System">
                                <i data-lucide="power" class="w-4 h-4" aria-hidden="true"></i>
                                Restart System
                            </button>
                        </div>
                    </section>
                </div>
            </div>
        </main>
    </div>
    <script>
        lucide.createIcons();
        
        class ConfigurationController {
            constructor() {
                this.currentCategory = 'safety';
                this.hasUnsavedChanges = false;
                this.initializeEventListeners();
                this.initializeAccessibility();
            }
            
            initializeEventListeners() {
                // Category switching
                document.querySelectorAll('.config-category').forEach(btn => {
                    btn.addEventListener('click', (e) => this.switchCategory(e.currentTarget.dataset.category));
                });
                
                // Form inputs
                document.querySelectorAll('input, select, textarea').forEach(input => {
                    input.addEventListener('change', () => this.markAsUnsaved());
                });
                
                // Action buttons
                document.getElementById('save-config').addEventListener('click', () => this.saveConfiguration());
                document.getElementById('reset-config').addEventListener('click', () => this.resetConfiguration());
                document.getElementById('export-config').addEventListener('click', () => this.exportConfiguration());
                document.getElementById('import-config').addEventListener('click', () => this.importConfiguration());
                document.getElementById('restart-system').addEventListener('click', () => this.restartSystem());
                
                // Navigation emergency controls
                document.getElementById('emergency-stop').addEventListener('click', () => this.emergencyStop());
                document.getElementById('pause-system').addEventListener('click', () => this.pauseSystem());
                document.getElementById('reset-system').addEventListener('click', () => this.resetSystem());
            }
            
            initializeAccessibility() {
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        e.preventDefault();
                        this.emergencyStop();
                    }
                });
            }
            
            switchCategory(category) {
                // Update category buttons
                document.querySelectorAll('.config-category').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-category="${category}"]`).classList.add('active');
                
                // Update content sections
                document.querySelectorAll('.config-content').forEach(section => {
                    section.classList.remove('active');
                });
                document.getElementById(`${category}-config`).classList.add('active');
                
                this.currentCategory = category;
                console.log(`Switched to ${category} configuration`);
            }
            
            markAsUnsaved() {
                this.hasUnsavedChanges = true;
                const statusElement = document.getElementById(`${this.currentCategory}-status`);
                statusElement.textContent = 'UNSAVED';
                statusElement.className = 'config-status status-unsaved';
            }
            
            saveConfiguration() {
                // Simulate saving
                setTimeout(() => {
                    this.hasUnsavedChanges = false;
                    const statusElement = document.getElementById(`${this.currentCategory}-status`);
                    statusElement.textContent = 'SAVED';
                    statusElement.className = 'config-status status-saved';
                    
                    console.log('Configuration saved successfully');
                    alert('Configuration saved successfully');
                }, 1000);
            }
            
            resetConfiguration() {
                if (confirm('Are you sure you want to reset all configuration to defaults?')) {
                    // Reset form values
                    document.querySelectorAll('input[type="text"], input[type="number"]').forEach(input => {
                        input.value = input.defaultValue;
                    });
                    
                    document.querySelectorAll('select').forEach(select => {
                        select.selectedIndex = 0;
                    });
                    
                    document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                        checkbox.checked = checkbox.defaultChecked;
                    });
                    
                    this.hasUnsavedChanges = false;
                    const statusElement = document.getElementById(`${this.currentCategory}-status`);
                    statusElement.textContent = 'SAVED';
                    statusElement.className = 'config-status status-saved';
                    
                    console.log('Configuration reset to defaults');
                    alert('Configuration reset to defaults');
                }
            }
            
            exportConfiguration() {
                const config = {
                    safety: this.getFormData('safety-config'),
                    operational: this.getFormData('operational-config'),
                    system: this.getFormData('system-config'),
                    interface: this.getFormData('interface-config')
                };
                
                const blob = new Blob([JSON.stringify(config, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'oht50-config.json';
                a.click();
                URL.revokeObjectURL(url);
                
                console.log('Configuration exported');
            }
            
            importConfiguration() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                input.onchange = (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            try {
                                const config = JSON.parse(e.target.result);
                                this.loadFormData(config);
                                console.log('Configuration imported successfully');
                                alert('Configuration imported successfully');
                            } catch (error) {
                                console.error('Error importing configuration:', error);
                                alert('Error importing configuration file');
                            }
                        };
                        reader.readAsText(file);
                    }
                };
                input.click();
            }
            
            getFormData(sectionId) {
                const section = document.getElementById(sectionId);
                const data = {};
                
                section.querySelectorAll('input, select, textarea').forEach(input => {
                    if (input.type === 'checkbox') {
                        data[input.id] = input.checked;
                    } else {
                        data[input.id] = input.value;
                    }
                });
                
                return data;
            }
            
            loadFormData(config) {
                Object.keys(config).forEach(section => {
                    const sectionConfig = config[section];
                    Object.keys(sectionConfig).forEach(fieldId => {
                        const field = document.getElementById(fieldId);
                        if (field) {
                            if (field.type === 'checkbox') {
                                field.checked = sectionConfig[fieldId];
                            } else {
                                field.value = sectionConfig[fieldId];
                            }
                        }
                    });
                });
            }
            
            restartSystem() {
                if (confirm('Are you sure you want to restart the system? This will disconnect all active sessions.')) {
                    console.log('System restart initiated');
                    alert('System restart initiated. Please wait...');
                }
            }
            
            emergencyStop() {
                console.log('EMERGENCY STOP ACTIVATED');
                alert('EMERGENCY STOP - All operations halted');
            }
            
            pauseSystem() {
                console.log('System Paused');
            }
            
            resetSystem() {
                console.log('System Reset');
            }
        }
        
        // Initialize controller when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new ConfigurationController();
        });
    </script>
</body>
</html>
